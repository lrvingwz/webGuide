<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>我的总结</title>
	<link rel="stylesheet" href="css/index.css">
</head>
<body>
    <header class="shadow">
        <div class="wrap clearfix">
            <span class="title">我的总结</span>
            <a href="javascript:;" class="back-btn">回到课程系统</a>
        </div>
    </header>
    <section class="wrap clearfix ">
        <ul class="firstCatalogue clearfix">
            <li class="shadow firstCata-item" data-level="初级">初级</li>
            <li class="shadow firstCata-item" data-level="中级">中级</li>
            <li class="shadow firstCata-item" data-level="高级">高级</li> 
        </ul>
        <div class="subCatalogue">
            <ul class="subCata-ul clearfix"></ul>
        </div>
        <div class="docCatalogue">
            <ul class="docCata-ul clearfix"></ul>
        </div>
        <div class="docContainer shadow"></div>
    </section>
	
	
	<script src='js/jquery.min.js'></script>
	<script>
        //一级分类
        //getFCatalogue('初级');

        $(".firstCata-item").on('click',function(){
            $('.docContainer').html("").hide();
            $('.docCata-ul').html("");
            active($(this));
            var level=$(this).text();
            getFCatalogue(level);

        });
        function getFCatalogue(level){
            $.ajax({
                type: 'GET',
                url:'http://study.zhanlaoshi.vip/v1/openapi/course/category',
                headers:{
                    contentType:'application/json',
                    Authorization:'w0xkap48bh8by6x1hwk159d3ihvspq17qecknhdrlf5n7bppgcnrd0viz41v44g12buwl5l4wsfdbm5fybrntp5t8l4vu6pvavhaqytxaqhz875dfgu5sqh7vkj37523'
                },
                success:function(res){
                    console.log(res);
                    var html='';
                    if(res.content.length>0){
                        for (var i = 0; i < res.content.length; i++) {
                            if(res.content[i].stage==level){
                                html+="<li class='subCata-item' data-cnum="+res.content[i].cnum+">"+res.content[i].courseName+"</li>";
                            }
                        }
                    }
                    $('.subCata-ul').html(html);
                }
            })
            
        }

        //二级分类
        
        

        $(".subCatalogue").on('click','.subCata-item',function(){
            $('.docContainer').html("").hide();
            active($(this));
            var subCnum=$(this).data('cnum');
            getSubCatalogue(subCnum);
        });
        function getSubCatalogue(subCnum){
            $.ajax({
                type: 'GET',
                url:'http://study.zhanlaoshi.vip/v1/openapi/course/category/'+subCnum,
                headers:{
                    contentType:'application/json',
                    Authorization:'w0xkap48bh8by6x1hwk159d3ihvspq17qecknhdrlf5n7bppgcnrd0viz41v44g12buwl5l4wsfdbm5fybrntp5t8l4vu6pvavhaqytxaqhz875dfgu5sqh7vkj37523'
                },
                success:function(res){
                    console.log(res);
                    var html='';
                    if(res.content.length>0){
                        for (var i = 0; i < res.content.length; i++) {
                            html+="<li class='docCata-item shadow' data-cnum="+res.content[i].cnum+">"+res.content[i].courseName+"</li>";
                        }
                    }
                    $('.docCata-ul').html(html);
                }
            })
        }

        //三级分类
        $(".docCata-ul").on('click','.docCata-item',function(){
            var docCnum=$(this).data('cnum');
            getDocCatalogue(docCnum);
            active($(this));
        });
        function getDocCatalogue(docCnum){
            $.ajax({
                type: 'GET',
                url:'http://study.zhanlaoshi.vip/v1/openapi/course/stage/summary/'+docCnum,
                headers:{
                    contentType:'application/json',
                    Authorization:'w0xkap48bh8by6x1hwk159d3ihvspq17qecknhdrlf5n7bppgcnrd0viz41v44g12buwl5l4wsfdbm5fybrntp5t8l4vu6pvavhaqytxaqhz875dfgu5sqh7vkj37523'
                },
                success:function(res){
                    console.log(res);
                    if(res.content){
                        $('.docContainer').html(res.content.summary).show();
                    }
                }
            })
        }

        function active(item){
            item.siblings().removeClass("active");
            item.addClass("active");
        }

	</script>
</body>
</html>