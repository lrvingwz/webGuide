<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>乁( ˙ ω˙乁)</title>
    <style>
        .map{
            width: 500px;
            height: 500px;
            background-color: #ccc;
            position: relative;
        }
    </style>
    <script src="../js/common.js"></script>
</head>
<body>
<div class="map"></div>
<script>
    (function () {
        var foodEle=[];
        function Food(width,height,color){
            this.width=width||20;
            this.height=height||20;
            this.color=color;
            this.x=0;
            this.y=0;
        }
        Food.prototype.init= function (map) {
            this.delFood();
            var div=document.createElement("div");
            div.style.width=this.width+"px";
            div.style.height=this.height+"px";
            div.style.backgroundColor=this.color;
            div.style.position="absolute";
            map.appendChild(div);
            foodEle.push(div);
            var x=Math.floor(Math.random()*map.offsetWidth/this.width)*this.width;
            var y=Math.floor(Math.random()*map.offsetHeight/this.height)*this.height;
            div.style.left=x+"px";
            div.style.top=y+"px";
        };
        Food.prototype.delFood= function () {
            for(var i=0;i<foodEle.length;i++){
                foodEle[i].parentNode.removeChild(foodEle[i]);
            }
            foodEle.splice(0,foodEle.length);
        };
        window.Food=Food;
    }());
    (function () {
        var bodyEle=[];
        function Snake(width,height,direction){
            this.width=width||20;
            this.height=height||20;
            this.body=[
                {"x":3,"y":2,"color":"red"},
                {"x":2,"y":2,"color":"orange"},
                {"x":1,"y":2,"color":"orange"}
            ];
            this.direction=direction||"right";
        }
        Snake.prototype.init= function (map) {
            for(var i=0;i<this.body.length;i++){
                var div=document.createElement("div");
                div.style.width=this.width+"px";
                div.style.height=this.height+"px";
                div.style.display="absolute";
                div.style.backgroundColor=this.body[i]["color"];
                div.style.left=this.body[i]["x"]*this.width+"px";
                div.style.top=this.body[i]["y"]*this.height+"px";
                map.appendChild(div);
                bodyEle.push(div);
            }
        };
        Snake.prototype.move= function () {
            for(var i=this.body.length-1;i>0;i--){
                this.body[i]["x"]=this.body[i-1]["x"];
                this.body[i]["y"]=this.body[i-1]["y"];
            }

            switch (this.direction){
                case "right":
                    this.body[0]["x"]+=1;
                    break;
                case "left":
                    this.body[0]["x"]-=1;
                    break;
                case "top":
                    this.body[0]["y"]-=1;
                    break;
                case "bottom":
                    this.body[0]["y"]+=1;
                    break;
            }
        }
    }());
    var ft=new Food(20,20,"green");
    ft.init(document.querySelector(".map"));
</script>
</body>
</html>